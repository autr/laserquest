var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,r=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,o=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,s=(e,s)=>{for(var a in s||(s={}))t.call(s,a)&&o(e,a,s[a]);if(r)for(var a of r(s))n.call(s,a)&&o(e,a,s[a]);return e};import{_ as a}from"./preload-helper-9f12a5fd.js";import{S as l,i,s as c,j as u,e as h,t as f,l as p,c as d,a as m,b as g,d as v,o as b,f as x,g as y,H as w,I as E,h as _,J as O,K as j,L as k,n as I,B as S}from"./vendor-72a2eff2.js";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function A(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}function D(e){var t={exports:{}};return e(t,t.exports),t.exports}var T=D((function(e,t){var r,n,o,s;void 0===(s=t)&&(window.rison={}),s.uri_ok={"~":!0,"!":!0,"*":!0,"(":!0,")":!0,"-":!0,_:!0,".":!0,",":!0,":":!0,"@":!0,$:!0,"'":!0,"/":!0},function(){for(var e=[],t=0;t<16;t++)for(var r=0;r<16;r++)if(t+r!=0){var n=String.fromCharCode(16*t+r);/\w|[-_.\/~]/.test(n)||e.push("\\u00"+t.toString(16)+r.toString(16))}s.not_idchar=e.join("")}(),s.not_idchar=" '!:(),*@$",s.not_idstart="-0123456789",o="[^"+s.not_idstart+s.not_idchar+"][^"+s.not_idchar+"]*",s.id_ok=new RegExp("^"+o+"$"),s.next_id=new RegExp(o,"g"),s.quote=function(e){return/^[-A-Za-z0-9~!*()_.',:@$\/]*$/.test(e)?e:encodeURIComponent(e).replace("%2C",",","g").replace("%3A",":","g").replace("%40","@","g").replace("%24","$","g").replace("%2F","/","g").replace("%20","+","g")},r={"'":!0,"!":!0},n={array:function(e){var t,r,o,s,a=["!("],l=e.length;for(o=0;o<l;o+=1)s=e[o],(r=n[typeof s])&&"string"==typeof(s=r(s))&&(t&&(a[a.length]=","),a[a.length]=s,t=!0);return a[a.length]=")",a.join("")},boolean:function(e){return e?"!t":"!f"},null:function(e){return"!n"},number:function(e){return isFinite(e)?String(e).replace(/\+/,""):"!n"},object:function(e){if(e){if(e instanceof Array)return n.array(e);if("object"==typeof e.__prototype__&&void 0!==e.__prototype__.encode_rison)return e.encode_rison();var t,r,o,s,a,l=["("],i=[];for(o in e)i[i.length]=o;for(i.sort(),a=0;a<i.length;a++)s=e[o=i[a]],(r=n[typeof s])&&"string"==typeof(s=r(s))&&(t&&(l[l.length]=","),l.push(n.string(o),":",s),t=!0);return l[l.length]=")",l.join("")}return"!n"},string:function(e){return""==e?"''":s.id_ok.test(e)?e:"'"+(e=e.replace(/(['!])/g,(function(e,t){return r[t]?"!"+t:t})))+"'"},undefined:function(e){throw new Error("rison can't encode the undefined value")}},s.encode=function(e){return n[typeof e](e)},s.encode_object=function(e){if("object"!=typeof e||null===e||e instanceof Array)throw new Error("rison.encode_object expects an object argument");var t=n[typeof e](e);return t.substring(1,t.length-1)},s.encode_array=function(e){if(!(e instanceof Array))throw new Error("rison.encode_array expects an array argument");var t=n[typeof e](e);return t.substring(2,t.length-1)},s.encode_uri=function(e){return s.quote(n[typeof e](e))},s.decode=function(e){var t=function(e){throw Error("rison decoder error: "+e)};return new s.parser(t).parse(e)},s.decode_object=function(e){return s.decode("("+e+")")},s.decode_array=function(e){return s.decode("!("+e+")")},s.parser=function(e){this.errorHandler=e},s.parser.WHITESPACE="",s.parser.prototype.setOptions=function(e){e.errorHandler&&(this.errorHandler=e.errorHandler)},s.parser.prototype.parse=function(e){this.string=e,this.index=0,this.message=null;var t=this.readValue();return!this.message&&this.next()&&(t=this.error("unable to parse string as rison: '"+s.encode(e)+"'")),this.message&&this.errorHandler&&this.errorHandler(this.message,this.index),t},s.parser.prototype.error=function(e){"undefined"!=typeof console&&console.log("rison parser error: ",e),this.message=e},s.parser.prototype.readValue=function(){var e=this.next(),t=e&&this.table[e];if(t)return t.apply(this);var r=this.string,n=this.index-1;s.next_id.lastIndex=n;var o=s.next_id.exec(r);if(o.length>0){var a=o[0];return this.index=n+a.length,a}return e?this.error("invalid character: '"+e+"'"):this.error("empty expression")},s.parser.parse_array=function(e){for(var t,r=[];")"!=(t=e.next());){if(!t)return e.error("unmatched '!('");if(r.length)","!=t&&e.error("missing ','");else{if(","==t)return e.error("extra ','");--e.index}var n=e.readValue();if(void 0===n)return;r.push(n)}return r},s.parser.bangs={t:!0,f:!1,n:null,"(":s.parser.parse_array},s.parser.prototype.table={"!":function(){var e=this.string.charAt(this.index++);if(!e)return this.error('"!" at end of input');var t=s.parser.bangs[e];return"function"==typeof t?t.call(null,this):void 0===t?this.error('unknown literal: "!'+e+'"'):t},"(":function(){for(var e,t={},r=0;")"!=(e=this.next());){if(r)","!=e&&this.error("missing ','");else{if(","==e)return this.error("extra ','");--this.index}var n=this.readValue();if(void 0===n)return;if(":"!=this.next())return this.error("missing ':'");var o=this.readValue();if(void 0===o)return;t[n]=o,r++}return t},"'":function(){for(var e,t=this.string,r=this.index,n=r,o=[];"'"!=(e=t.charAt(r++));){if(!e)return this.error('unmatched "\'"');if("!"==e){if(n<r-1&&o.push(t.slice(n,r-1)),e=t.charAt(r++),!("!'".indexOf(e)>=0))return this.error('invalid string escape: "!'+e+'"');o.push(e),n=r}}return n<r-1&&o.push(t.slice(n,r-1)),this.index=r,1==o.length?o[0]:o.join("")},"-":function(){var e=this.string,t=this.index,r=t-1,n="int",o="-",s={"int+.":"frac","int+e":"exp","frac+e":"exp"};do{var a=e.charAt(t++);if(!a)break;"0"<=a&&a<="9"||(o.indexOf(a)>=0?o="":"exp"==(n=s[n+"+"+a.toLowerCase()])&&(o="-"))}while(n);return this.index=--t,"-"==(e=e.slice(r,t))?this.error("invalid number"):Number(e)}},function(e){for(var t=0;t<=9;t++)e[String(t)]=e["-"]}(s.parser.prototype.table),s.parser.prototype.next=function(){var e=this.string,t=this.index;do{if(t==e.length)return;var r=e.charAt(t++)}while(s.parser.WHITESPACE.indexOf(r)>=0);return this.index=t,r}}));function V(e,t,r){const n=e.slice();return n[21]=t[r],n[22]=t,n[23]=r,n}function N(e,t,r){const n=e.slice();return n[24]=t[r][0],n[25]=t[r][1],n[26]=t,n[27]=r,n}function P(e,t,r){const n=e.slice();return n[28]=t[r][0],n[29]=t[r][1],n[30]=t,n[31]=r,n}function C(e,t,r){const n=e.slice();return n[24]=t[r][0],n[25]=t[r][1],n[32]=t,n[33]=r,n}function U(e){let t,r,n,o=e[25].title+"";return{c(){t=h("div"),r=f("# "),n=f(o),this.h()},l(e){t=d(e,"DIV",{class:!0});var s=m(t);r=g(s,"# "),n=g(s,o),s.forEach(v),this.h()},h(){b(t,"class","mb1 bt1-solid pt1")},m(e,o){x(e,t,o),y(t,r),y(t,n)},p(e,t){2&t[0]&&o!==(o=e[25].title+"")&&_(n,o)},d(e){e&&v(t)}}}function H(e){let t,r,n,o,s,a,l,i,c,k,I,S,A,D,T,V,N,P=e[25].name+"",C=e[25].unit+"",H=e[25].title&&U(e);function L(){e[8].call(I,e[24])}return{c(){H&&H.c(),t=u(),r=h("fieldset"),n=h("div"),o=f(P),s=u(),a=h("span"),l=f("("),i=f(C),c=f(")"),k=u(),I=h("input"),T=u(),this.h()},l(e){H&&H.l(e),t=p(e),r=d(e,"FIELDSET",{class:!0});var u=m(r);n=d(u,"DIV",{class:!0});var h=m(n);o=g(h,P),s=p(h),a=d(h,"SPAN",{class:!0});var f=m(a);l=g(f,"("),i=g(f,C),c=g(f,")"),f.forEach(v),h.forEach(v),k=p(u),I=d(u,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0,placeholder:!0}),T=p(u),u.forEach(v),this.h()},h(){b(a,"class","fade"),b(n,"class","w120px"),b(I,"class","grow"),b(I,"type","number"),b(I,"min",S=e[25].min),b(I,"max",A=e[25].max),b(I,"step",D=e[25].step||1),b(I,"placeholder","width"),b(r,"class","flex mb1 minw200px")},m(u,h){H&&H.m(u,h),x(u,t,h),x(u,r,h),y(r,n),y(n,o),y(n,s),y(n,a),y(a,l),y(a,i),y(a,c),y(r,k),y(r,I),w(I,e[1][e[24]].value),y(r,T),V||(N=[E(I,"keyup",W),E(I,"input",L)],V=!0)},p(r,n){(e=r)[25].title?H?H.p(e,n):(H=U(e),H.c(),H.m(t.parentNode,t)):H&&(H.d(1),H=null),2&n[0]&&P!==(P=e[25].name+"")&&_(o,P),2&n[0]&&C!==(C=e[25].unit+"")&&_(i,C),2&n[0]&&S!==(S=e[25].min)&&b(I,"min",S),2&n[0]&&A!==(A=e[25].max)&&b(I,"max",A),2&n[0]&&D!==(D=e[25].step||1)&&b(I,"step",D),2&n[0]&&O(I.value)!==e[1][e[24]].value&&w(I,e[1][e[24]].value)},d(e){H&&H.d(e),e&&v(t),e&&v(r),V=!1,j(N)}}}function L(e){let t,r,n,o,s,a;function l(){e[15].call(t,e[23],e[24])}return{c(){t=h("input"),this.h()},l(e){t=d(e,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0,placeholder:!0}),this.h()},h(){b(t,"class","grow"),b(t,"type","number"),b(t,"min",r=e[25].min),b(t,"max",n=e[25].max),b(t,"step",o=e[25].step||1),b(t,"placeholder","width")},m(r,n){x(r,t,n),w(t,e[2][e[23]].props[e[24]].value),s||(a=[E(t,"keyup",W),E(t,"input",l)],s=!0)},p(s,a){e=s,4&a[0]&&r!==(r=e[25].min)&&b(t,"min",r),4&a[0]&&n!==(n=e[25].max)&&b(t,"max",n),4&a[0]&&o!==(o=e[25].step||1)&&b(t,"step",o),4&a[0]&&O(t.value)!==e[2][e[23]].props[e[24]].value&&w(t,e[2][e[23]].props[e[24]].value)},d(e){e&&v(t),s=!1,j(a)}}}function R(e){let t,r=Object.entries(e[3]),n=[];for(let o=0;o<r.length;o+=1)n[o]=$(P(e,r,o));return{c(){t=h("div");for(let e=0;e<n.length;e+=1)n[e].c()},l(e){t=d(e,"DIV",{});var r=m(t);for(let t=0;t<n.length;t+=1)n[t].l(r);r.forEach(v)},m(e,r){x(e,t,r);for(let o=0;o<n.length;o+=1)n[o].m(t,null)},p(e,o){if(12&o[0]){let s;for(r=Object.entries(e[3]),s=0;s<r.length;s+=1){const a=P(e,r,s);n[s]?n[s].p(a,o):(n[s]=$(a),n[s].c(),n[s].m(t,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(e){e&&v(t),k(n,e)}}}function $(e){let t,r,n,o,s,a,l,i,c=e[29]+"";function w(...t){return e[13](e[23],e[24],e[28],...t)}function _(){e[14].call(r,e[23],e[24],e[28])}return{c(){t=h("label"),r=h("input"),n=u(),o=h("span"),s=u(),a=f(c),this.h()},l(e){t=d(e,"LABEL",{class:!0});var l=m(t);r=d(l,"INPUT",{type:!0}),n=p(l),o=d(l,"SPAN",{}),m(o).forEach(v),s=p(l),a=g(l,c),l.forEach(v),this.h()},h(){b(r,"type","checkbox"),b(t,"class","checkbox relative")},m(c,u){x(c,t,u),y(t,r),r.checked=e[2][e[23]].props[e[24]].value[e[28]],y(t,n),y(t,o),y(t,s),y(t,a),l||(i=[E(r,"change",w),E(r,"change",_)],l=!0)},p(t,n){e=t,12&n[0]&&(r.checked=e[2][e[23]].props[e[24]].value[e[28]])},d(e){e&&v(t),l=!1,j(i)}}}function F(e){let t,r,n,o,s,a,l,i,c,w=e[25].name+"",E=e[25].unit+"";function O(e,t){return e[25].unit==z?R:L}let j=O(e),k=j(e);return{c(){t=h("fieldset"),r=h("div"),n=f(w),o=u(),s=h("span"),a=f("("),l=f(E),i=f(")"),c=u(),k.c(),this.h()},l(e){t=d(e,"FIELDSET",{class:!0});var u=m(t);r=d(u,"DIV",{class:!0});var h=m(r);n=g(h,w),o=p(h),s=d(h,"SPAN",{class:!0});var f=m(s);a=g(f,"("),l=g(f,E),i=g(f,")"),f.forEach(v),h.forEach(v),c=p(u),k.l(u),u.forEach(v),this.h()},h(){b(s,"class","fade"),b(r,"class","w160px"),b(t,"class","flex mb1 minw280px ")},m(e,u){x(e,t,u),y(t,r),y(r,n),y(r,o),y(r,s),y(s,a),y(s,l),y(s,i),y(t,c),k.m(t,null)},p(e,r){4&r[0]&&w!==(w=e[25].name+"")&&_(n,w),4&r[0]&&E!==(E=e[25].unit+"")&&_(l,E),j===(j=O(e))&&k?k.p(e,r):(k.d(1),k=j(e),k&&(k.c(),k.m(t,null)))},d(e){e&&v(t),k.d()}}}function J(e){let t,r,n,o,s,a,l,i,c,w,O,j,I=e[23]+1+"",S=e[21].name+"";function A(...t){return e[12](e[23],...t)}let D=Object.entries(e[21].props),T=[];for(let u=0;u<D.length;u+=1)T[u]=F(N(e,D,u));return{c(){t=h("div"),r=h("div"),n=h("div"),o=f("#"),s=f(I),a=u(),l=f(S),i=u(),c=h("button"),w=u();for(let e=0;e<T.length;e+=1)T[e].c();this.h()},l(e){t=d(e,"DIV",{class:!0});var u=m(t);r=d(u,"DIV",{class:!0});var h=m(r);n=d(h,"DIV",{});var f=m(n);o=g(f,"#"),s=g(f,I),a=p(f),l=g(f,S),f.forEach(v),i=p(h),c=d(h,"BUTTON",{class:!0}),m(c).forEach(v),h.forEach(v),w=p(u);for(let t=0;t<T.length;t+=1)T[t].l(u);u.forEach(v),this.h()},h(){b(c,"class","cross w1em"),b(r,"class","mtb1 flex row-space-between-flex-start"),b(t,"class","bb1-solid")},m(e,u){x(e,t,u),y(t,r),y(r,n),y(n,o),y(n,s),y(n,a),y(n,l),y(r,i),y(r,c),y(t,w);for(let r=0;r<T.length;r+=1)T[r].m(t,null);O||(j=E(c,"click",A),O=!0)},p(r,n){if(e=r,4&n[0]&&S!==(S=e[21].name+"")&&_(l,S),12&n[0]){let r;for(D=Object.entries(e[21].props),r=0;r<D.length;r+=1){const o=N(e,D,r);T[r]?T[r].p(o,n):(T[r]=F(o),T[r].c(),T[r].m(t,null))}for(;r<T.length;r+=1)T[r].d(1);T.length=D.length}},d(e){e&&v(t),k(T,e),O=!1,j()}}}function B(e){let t,r,n,o,s,a,l,i,c,w,_,O,S,A,D,T,N,P,U,L,R,$,F,B,G,z,M,q,W,K=(e[0]?e[4](e[1],e[2]):"")+"",Z=Object.entries(e[1]),Q=[];for(let u=0;u<Z.length;u+=1)Q[u]=H(C(e,Z,u));let Y=e[2],ee=[];for(let u=0;u<Y.length;u+=1)ee[u]=J(V(e,Y,u));return{c(){t=h("main"),r=h("div"),n=h("aside"),o=h("div");for(let e=0;e<Q.length;e+=1)Q[e].c();s=u(),a=h("div"),l=h("button"),i=f("SVG"),c=u(),w=h("button"),_=f("DXF"),O=u(),S=h("button"),A=f("JSCAD"),D=u(),T=h("a"),N=f("autr.tv"),P=u(),U=h("section"),L=h("div"),$=u(),F=h("aside");for(let e=0;e<ee.length;e+=1)ee[e].c();B=u(),G=h("div"),z=h("button"),M=f("add hole(s)"),this.h()},l(e){t=d(e,"MAIN",{});var u=m(t);r=d(u,"DIV",{class:!0});var h=m(r);n=d(h,"ASIDE",{class:!0});var f=m(n);o=d(f,"DIV",{});var b=m(o);for(let t=0;t<Q.length;t+=1)Q[t].l(b);b.forEach(v),s=p(f),a=d(f,"DIV",{class:!0});var x=m(a);l=d(x,"BUTTON",{class:!0});var y=m(l);i=g(y,"SVG"),y.forEach(v),c=p(x),w=d(x,"BUTTON",{class:!0});var E=m(w);_=g(E,"DXF"),E.forEach(v),O=p(x),S=d(x,"BUTTON",{class:!0});var j=m(S);A=g(j,"JSCAD"),j.forEach(v),D=p(x),T=d(x,"A",{href:!0,target:!0});var k=m(T);N=g(k,"autr.tv"),k.forEach(v),x.forEach(v),f.forEach(v),P=p(h),U=d(h,"SECTION",{class:!0});var I=m(U);L=d(I,"DIV",{style:!0}),m(L).forEach(v),I.forEach(v),$=p(h),F=d(h,"ASIDE",{class:!0});var V=m(F);for(let t=0;t<ee.length;t+=1)ee[t].l(V);B=p(V),G=d(V,"DIV",{class:!0});var C=m(G);z=d(C,"BUTTON",{class:!0});var H=m(z);M=g(H,"add hole(s)"),H.forEach(v),C.forEach(v),V.forEach(v),h.forEach(v),u.forEach(v),this.h()},h(){b(l,"class","filled w100pc"),b(w,"class","filled w100pc"),b(S,"class","filled w100pc"),b(T,"href","https://autr.tv"),b(T,"target","_blank"),b(a,"class","cmb1"),b(n,"class",X+" maxw230px bg-b"),b(L,"style",R=`transform: scale( ${e[1].screen.value} ); transform-origin: 0 0`),b(U,"class","overflow-auto p1 grow flex column-center-center rel"),b(z,"class","grow filled w100pc"),b(G,"class","cmt1"),b(F,"class",X+" maxw320px bg-a"),b(r,"class","flex row-stretch-stretch h100vh overflow-hidden")},m(u,h){x(u,t,h),y(t,r),y(r,n),y(n,o);for(let e=0;e<Q.length;e+=1)Q[e].m(o,null);y(n,s),y(n,a),y(a,l),y(l,i),y(a,c),y(a,w),y(w,_),y(a,O),y(a,S),y(S,A),y(a,D),y(a,T),y(T,N),y(r,P),y(r,U),y(U,L),L.innerHTML=K,y(r,$),y(r,F);for(let e=0;e<ee.length;e+=1)ee[e].m(F,null);y(F,B),y(F,G),y(G,z),y(z,M),q||(W=[E(l,"click",e[9]),E(w,"click",e[10]),E(S,"click",e[11]),E(z,"click",e[16])],q=!0)},p(e,t){if(2&t[0]){let r;for(Z=Object.entries(e[1]),r=0;r<Z.length;r+=1){const n=C(e,Z,r);Q[r]?Q[r].p(n,t):(Q[r]=H(n),Q[r].c(),Q[r].m(o,null))}for(;r<Q.length;r+=1)Q[r].d(1);Q.length=Z.length}if(7&t[0]&&K!==(K=(e[0]?e[4](e[1],e[2]):"")+"")&&(L.innerHTML=K),2&t[0]&&R!==(R=`transform: scale( ${e[1].screen.value} ); transform-origin: 0 0`)&&b(L,"style",R),140&t[0]){let r;for(Y=e[2],r=0;r<Y.length;r+=1){const n=V(e,Y,r);ee[r]?ee[r].p(n,t):(ee[r]=J(n),ee[r].c(),ee[r].m(F,B))}for(;r<ee.length;r+=1)ee[r].d(1);ee.length=Y.length}},i:I,o:I,d(e){e&&v(t),k(Q,e),k(ee,e),q=!1,j(W)}}}const G="mm",z="target",M="hole(s)";let X="h100vh overflow-auto flex column-stretch-space-between p1";function q(e,t,r,n,o,s,a){return{value:e,name:t,min:n,max:o,step:s,unit:r,title:a}}function W(e,t){13===e.keyCode&&e.target.blur()}function K(e,t,r){let n,o,l=!1;S((async()=>{r(0,n=await a((()=>import("./index-d0e29eda.js").then((function(e){return e.i}))),void 0)),o={rectangle:n.models.Rectangle,svg:n.exporter.toSVG,subtract:n.model.combineSubtraction,union:n.model.combineUnion,move:n.model.move,combine:n.model.combine};try{const e="("+window.location.hash.substring(1)+")",t=T.decode(e);for(const[n,o]of Object.entries(t.conf))n in c&&null!=o&&r(1,c[n].value=o,c);r(2,f=[]),t.els.forEach(((e,t)=>{const r=p(e.name);for(const[n,o]of Object.entries(e.props))n in r.props&&null!=o&&(r.props[n].value=o)}))}catch(e){console.warn("error decoding URI, skipping:",e.message),p(M),p(M),r(2,f[1].props.diameter.value=50,f),r(2,f[1].props.offset.value=0,f),r(2,f[1].props.count.value=1,f)}}));const i={top:"top",left:"left",front:"front",back:"back",right:"right",bottom:"bottom"};let c={screen:q(1,"zoom","num",1,null,null),width:q(145,"width",G,20,null,null,"box"),height:q(145,"height",G,20),depth:q(145,"depth",G,20),thickness:q(5,"thickness",G,0,20),tabs:q(9,"tabs","num",0,null,null,"sides"),offset:q(1,"offset","num",0,2,.05),overhang:q(5,"overhang",G,2,null,null,"panel"),size:q(10,"size",G,0)};const u={[M]:{name:M,props:{diameter:q(3,"hole diameter",G),offset:q(60,"hole offset",G,0),count:q(4,"hole amount","num",1),rotate:q(0,"rotation","deg")}}};let h,f=[];function p(e){const t=f;r(2,f=[]);let n={};Object.keys(i).map((e=>n[e]=!1)),n.top=!0;let o=JSON.parse(JSON.stringify(u[e]));return o.props.target=q(n,"target",z),t.push(o),r(2,f=t),t[t.length-1]}function d(e,t){const r=n.exporter[e](h,{units:"mm"});let o=document.createElement("a");o.setAttribute("href","data:text/plaincharset=utf-8,"+encodeURIComponent(r)),o.setAttribute("download",`boxinator.${t}`),o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o)}function m(e){let t=f;r(2,f=[]),t.splice(e,1),r(2,f=t)}return[n,c,f,i,function(e,t){function r(e,t,r){const s=function(e){const t=n.model.findSingleChain(e);return n.exporter.chainToSVGPathData(t)}(e);return{models:{rect:o.move(n.importer.fromSVGPathData(s),[t,r])}}}let a={};if(!n)return;const i=e.thickness.value||1,c=e.depth.value||1,u=e.tabs.value||1,f=e.size.value||1,p=parseFloat(e.offset.value)||0,d=e.overhang.value||1;let m=e.width.value||1,g=e.height.value||1;m+=i,g+=i;let v=0;const b=g,x=g+2*d+3*i;let y={};["top","bottom"].forEach(((e,t)=>{let r=g+i;const s=t%2==0,a=2*d,l=m+a+i,u=g+a+i;let h={models:{rect:new o.rectangle(l,u)},origin:[r-d+i,s?0:x+c+2*i]};const p=f+i;let v={models:{a:o.move(new o.rectangle(p,i),[d,d]),b:o.move(new o.rectangle(i,p),[d,d])}};o.combine(v.models.a,v.models.b),[{name:"bl",rot:0,xy:[0,0]},{name:"br",rot:90,xy:[l,0]},{name:"tr",rot:180,xy:[l,u]},{name:"tl",rot:270,xy:[0,u]}].forEach((e=>{const t=JSON.parse(JSON.stringify(v));o.move(t,e.xy),n.model.rotate(t,e.rot,e.xy),h.models[e.name]=t})),y[e]=h})),["left","front","right","back"].forEach(((e,t)=>{let n=t%2==0?g:m;n+=i;let s={models:{rect:new o.rectangle(n,c)},origin:[v,b]};const l=c/(u/2);for(let r=0;r<u/2+1;r++){s.origin[0];const e=l*r,t=l/2;[{x:-1,y:e-t*p,w:i+1,h:t},{x:n-i,y:e-t*p+t,w:i+1,h:t}].forEach(((e,t)=>{parseInt(e.y+e.h)==parseInt(c)&&(e.h+=10);const n=o.move(new o.rectangle(e.w,e.h),[e.x,e.y]),a="bit"+r+"-"+t;s.models[a]=n,o.subtract(s.models.rect,s.models[a])}))}let h=[{x:v,y:-i,w:f,h:i+1},{x:v+n-2*i+i,y:-i,w:f-i,h:i+1},{x:v,y:c-1,w:f,h:i+1},{x:v+n-2*i+i,y:c-1,w:f-i,h:i+1}];s=r(s,0,-g),h.forEach(((e,r)=>{const a=e.x+e.w==n+v,l=e.x==v;a||l?(e.w+=i,r%2!=0&&(e.x-=f)):(e.x-=f,e.w+=f+(i-f));const c=o.move(new o.rectangle(e.w,e.h),[e.x,e.y]),u="slot"+t+"-"+r;s.models[u]=c,o.combine(s.models.rect,s.models[u],!1,!0,!1,!0)})),s=r(s,0,0),s.origin=[0,x],a[e]=s,v+=n+i}));let w={};if(t.forEach(((e,t)=>{const r=e.props.target.value;Object.keys(r).forEach((l=>{const i=r[l],c=s(s({},a),y)[l],u=e.props.diameter.value||1,h=e.props.offset.value||0,f=e.props.rotate.value||0,p=e.props.count.value||1;if(!i||!c)return;const d=n.measure.modelExtents(c),m=d.center;let g=360/p;console.log("bounding box ~",l,d.width,d.height);for(let e=0;e<p;e++){const r={type:"circle",origin:m,radius:u},s="circle-"+l+"-"+t+"-"+e;o.move(r,[h+m[0],m[1]]);let a=f+e*g;n.path.rotate(r,a,m),w[s]=r}}))})),h={models:{sides:{models:a},faces:{models:y}},paths:w},n.model.mirror(h,!0,!0),l)try{let r={conf:{},els:[]};Object.keys(e).forEach((t=>r.conf[t]=e[t].value)),t.forEach((e=>{let t={props:{},name:e.name};Object.keys(e.props).forEach((r=>t.props[r]=e.props[r].value)),r.els.push(t)})),window.location.hash=T.encode_object(r)}catch(E){console.warn("error encoding URI, skipping:",E.message)}return l=!0,o.svg(h)},p,d,m,function(e){c[e].value=O(this.value),r(1,c)},e=>d("toSVG","svg"),e=>d("toDXF","dxf"),e=>d("toOpenJsCad","ojscad"),(e,t)=>m(e),(e,t,r,n)=>{f[e].props[t].value[r]},function(e,t,n){f[e].props[t].value[n]=this.checked,r(2,f),r(3,i)},function(e,t){f[e].props[t].value=O(this.value),r(2,f)},e=>p(M)]}class Z extends l{constructor(e){super(),i(this,e,K,B,c,{},[-1,-1])}}export{Z as R,D as c,A as g};
