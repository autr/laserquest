var e=Object.assign;import{S as t,i as r,s as n,j as o,e as s,t as a,l as i,c as l,a as c,b as u,d as h,o as f,f as p,g as d,G as m,H as g,h as v,I as b,J as x,K as y,n as w,B as E,_}from"./preload-helper-922df9d2.js";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function O(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t}function j(e){var t={exports:{}};return e(t,t.exports),t.exports}var k=j((function(e,t){var r,n,o,s;void 0===(s=t)&&(window.rison={}),s.uri_ok={"~":!0,"!":!0,"*":!0,"(":!0,")":!0,"-":!0,_:!0,".":!0,",":!0,":":!0,"@":!0,$:!0,"'":!0,"/":!0},function(){for(var e=[],t=0;t<16;t++)for(var r=0;r<16;r++)if(t+r!=0){var n=String.fromCharCode(16*t+r);/\w|[-_.\/~]/.test(n)||e.push("\\u00"+t.toString(16)+r.toString(16))}s.not_idchar=e.join("")}(),s.not_idchar=" '!:(),*@$",s.not_idstart="-0123456789",o="[^"+s.not_idstart+s.not_idchar+"][^"+s.not_idchar+"]*",s.id_ok=new RegExp("^"+o+"$"),s.next_id=new RegExp(o,"g"),s.quote=function(e){return/^[-A-Za-z0-9~!*()_.',:@$\/]*$/.test(e)?e:encodeURIComponent(e).replace("%2C",",","g").replace("%3A",":","g").replace("%40","@","g").replace("%24","$","g").replace("%2F","/","g").replace("%20","+","g")},r={"'":!0,"!":!0},n={array:function(e){var t,r,o,s,a=["!("],i=e.length;for(o=0;o<i;o+=1)s=e[o],(r=n[typeof s])&&"string"==typeof(s=r(s))&&(t&&(a[a.length]=","),a[a.length]=s,t=!0);return a[a.length]=")",a.join("")},boolean:function(e){return e?"!t":"!f"},null:function(e){return"!n"},number:function(e){return isFinite(e)?String(e).replace(/\+/,""):"!n"},object:function(e){if(e){if(e instanceof Array)return n.array(e);if("object"==typeof e.__prototype__&&void 0!==e.__prototype__.encode_rison)return e.encode_rison();var t,r,o,s,a,i=["("],l=[];for(o in e)l[l.length]=o;for(l.sort(),a=0;a<l.length;a++)s=e[o=l[a]],(r=n[typeof s])&&"string"==typeof(s=r(s))&&(t&&(i[i.length]=","),i.push(n.string(o),":",s),t=!0);return i[i.length]=")",i.join("")}return"!n"},string:function(e){return""==e?"''":s.id_ok.test(e)?e:"'"+(e=e.replace(/(['!])/g,(function(e,t){return r[t]?"!"+t:t})))+"'"},undefined:function(e){throw new Error("rison can't encode the undefined value")}},s.encode=function(e){return n[typeof e](e)},s.encode_object=function(e){if("object"!=typeof e||null===e||e instanceof Array)throw new Error("rison.encode_object expects an object argument");var t=n[typeof e](e);return t.substring(1,t.length-1)},s.encode_array=function(e){if(!(e instanceof Array))throw new Error("rison.encode_array expects an array argument");var t=n[typeof e](e);return t.substring(2,t.length-1)},s.encode_uri=function(e){return s.quote(n[typeof e](e))},s.decode=function(e){var t=function(e){throw Error("rison decoder error: "+e)};return new s.parser(t).parse(e)},s.decode_object=function(e){return s.decode("("+e+")")},s.decode_array=function(e){return s.decode("!("+e+")")},s.parser=function(e){this.errorHandler=e},s.parser.WHITESPACE="",s.parser.prototype.setOptions=function(e){e.errorHandler&&(this.errorHandler=e.errorHandler)},s.parser.prototype.parse=function(e){this.string=e,this.index=0,this.message=null;var t=this.readValue();return!this.message&&this.next()&&(t=this.error("unable to parse string as rison: '"+s.encode(e)+"'")),this.message&&this.errorHandler&&this.errorHandler(this.message,this.index),t},s.parser.prototype.error=function(e){"undefined"!=typeof console&&console.log("rison parser error: ",e),this.message=e},s.parser.prototype.readValue=function(){var e=this.next(),t=e&&this.table[e];if(t)return t.apply(this);var r=this.string,n=this.index-1;s.next_id.lastIndex=n;var o=s.next_id.exec(r);if(o.length>0){var a=o[0];return this.index=n+a.length,a}return e?this.error("invalid character: '"+e+"'"):this.error("empty expression")},s.parser.parse_array=function(e){for(var t,r=[];")"!=(t=e.next());){if(!t)return e.error("unmatched '!('");if(r.length)","!=t&&e.error("missing ','");else{if(","==t)return e.error("extra ','");--e.index}var n=e.readValue();if(void 0===n)return;r.push(n)}return r},s.parser.bangs={t:!0,f:!1,n:null,"(":s.parser.parse_array},s.parser.prototype.table={"!":function(){var e=this.string.charAt(this.index++);if(!e)return this.error('"!" at end of input');var t=s.parser.bangs[e];return"function"==typeof t?t.call(null,this):void 0===t?this.error('unknown literal: "!'+e+'"'):t},"(":function(){for(var e,t={},r=0;")"!=(e=this.next());){if(r)","!=e&&this.error("missing ','");else{if(","==e)return this.error("extra ','");--this.index}var n=this.readValue();if(void 0===n)return;if(":"!=this.next())return this.error("missing ':'");var o=this.readValue();if(void 0===o)return;t[n]=o,r++}return t},"'":function(){for(var e,t=this.string,r=this.index,n=r,o=[];"'"!=(e=t.charAt(r++));){if(!e)return this.error('unmatched "\'"');if("!"==e){if(n<r-1&&o.push(t.slice(n,r-1)),e=t.charAt(r++),!("!'".indexOf(e)>=0))return this.error('invalid string escape: "!'+e+'"');o.push(e),n=r}}return n<r-1&&o.push(t.slice(n,r-1)),this.index=r,1==o.length?o[0]:o.join("")},"-":function(){var e=this.string,t=this.index,r=t-1,n="int",o="-",s={"int+.":"frac","int+e":"exp","frac+e":"exp"};do{var a=e.charAt(t++);if(!a)break;"0"<=a&&a<="9"||(o.indexOf(a)>=0?o="":"exp"==(n=s[n+"+"+a.toLowerCase()])&&(o="-"))}while(n);return this.index=--t,"-"==(e=e.slice(r,t))?this.error("invalid number"):Number(e)}},function(e){for(var t=0;t<=9;t++)e[String(t)]=e["-"]}(s.parser.prototype.table),s.parser.prototype.next=function(){var e=this.string,t=this.index;do{if(t==e.length)return;var r=e.charAt(t++)}while(s.parser.WHITESPACE.indexOf(r)>=0);return this.index=t,r}}));function I(e,t,r){const n=e.slice();return n[21]=t[r],n[22]=t,n[23]=r,n}function S(e,t,r){const n=e.slice();return n[24]=t[r][0],n[25]=t[r][1],n[26]=t,n[27]=r,n}function A(e,t,r){const n=e.slice();return n[28]=t[r][0],n[29]=t[r][1],n[30]=t,n[31]=r,n}function D(e,t,r){const n=e.slice();return n[24]=t[r][0],n[25]=t[r][1],n[32]=t,n[33]=r,n}function T(e){let t,r,n,o=e[25].title+"";return{c(){t=s("div"),r=a("# "),n=a(o),this.h()},l(e){t=l(e,"DIV",{class:!0});var s=c(t);r=u(s,"# "),n=u(s,o),s.forEach(h),this.h()},h(){f(t,"class","mb1 bt1-solid pt1")},m(e,o){p(e,t,o),d(t,r),d(t,n)},p(e,t){2&t[0]&&o!==(o=e[25].title+"")&&v(n,o)},d(e){e&&h(t)}}}function V(e){let t,r,n,y,w,E,_,O,j,k,I,S,A,D,V,N,C,P=e[25].name+"",U=e[25].unit+"",H=e[25].title&&T(e);function R(){e[8].call(I,e[24])}return{c(){H&&H.c(),t=o(),r=s("fieldset"),n=s("div"),y=a(P),w=o(),E=s("span"),_=a("("),O=a(U),j=a(")"),k=o(),I=s("input"),V=o(),this.h()},l(e){H&&H.l(e),t=i(e),r=l(e,"FIELDSET",{class:!0});var o=c(r);n=l(o,"DIV",{class:!0});var s=c(n);y=u(s,P),w=i(s),E=l(s,"SPAN",{class:!0});var a=c(E);_=u(a,"("),O=u(a,U),j=u(a,")"),a.forEach(h),s.forEach(h),k=i(o),I=l(o,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0,placeholder:!0}),V=i(o),o.forEach(h),this.h()},h(){f(E,"class","fade"),f(n,"class","w120px"),f(I,"class","grow"),f(I,"type","number"),f(I,"min",S=e[25].min),f(I,"max",A=e[25].max),f(I,"step",D=e[25].step||1),f(I,"placeholder","width"),f(r,"class","flex mb1 minw200px")},m(o,s){H&&H.m(o,s),p(o,t,s),p(o,r,s),d(r,n),d(n,y),d(n,w),d(n,E),d(E,_),d(E,O),d(E,j),d(r,k),d(r,I),m(I,e[1][e[24]].value),d(r,V),N||(C=[g(I,"keyup",G),g(I,"input",R)],N=!0)},p(r,n){(e=r)[25].title?H?H.p(e,n):(H=T(e),H.c(),H.m(t.parentNode,t)):H&&(H.d(1),H=null),2&n[0]&&P!==(P=e[25].name+"")&&v(y,P),2&n[0]&&U!==(U=e[25].unit+"")&&v(O,U),2&n[0]&&S!==(S=e[25].min)&&f(I,"min",S),2&n[0]&&A!==(A=e[25].max)&&f(I,"max",A),2&n[0]&&D!==(D=e[25].step||1)&&f(I,"step",D),2&n[0]&&b(I.value)!==e[1][e[24]].value&&m(I,e[1][e[24]].value)},d(e){H&&H.d(e),e&&h(t),e&&h(r),N=!1,x(C)}}}function N(e){let t,r,n,o,a,i;function c(){e[15].call(t,e[23],e[24])}return{c(){t=s("input"),this.h()},l(e){t=l(e,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0,placeholder:!0}),this.h()},h(){f(t,"class","grow"),f(t,"type","number"),f(t,"min",r=e[25].min),f(t,"max",n=e[25].max),f(t,"step",o=e[25].step||1),f(t,"placeholder","width")},m(r,n){p(r,t,n),m(t,e[2][e[23]].props[e[24]].value),a||(i=[g(t,"keyup",G),g(t,"input",c)],a=!0)},p(s,a){e=s,4&a[0]&&r!==(r=e[25].min)&&f(t,"min",r),4&a[0]&&n!==(n=e[25].max)&&f(t,"max",n),4&a[0]&&o!==(o=e[25].step||1)&&f(t,"step",o),4&a[0]&&b(t.value)!==e[2][e[23]].props[e[24]].value&&m(t,e[2][e[23]].props[e[24]].value)},d(e){e&&h(t),a=!1,x(i)}}}function C(e){let t,r=Object.entries(e[3]),n=[];for(let o=0;o<r.length;o+=1)n[o]=P(A(e,r,o));return{c(){t=s("div");for(let e=0;e<n.length;e+=1)n[e].c()},l(e){t=l(e,"DIV",{});var r=c(t);for(let t=0;t<n.length;t+=1)n[t].l(r);r.forEach(h)},m(e,r){p(e,t,r);for(let o=0;o<n.length;o+=1)n[o].m(t,null)},p(e,o){if(12&o[0]){let s;for(r=Object.entries(e[3]),s=0;s<r.length;s+=1){const a=A(e,r,s);n[s]?n[s].p(a,o):(n[s]=P(a),n[s].c(),n[s].m(t,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(e){e&&h(t),y(n,e)}}}function P(e){let t,r,n,m,v,b,y,w,E=e[29]+"";function _(...t){return e[13](e[23],e[24],e[28],...t)}function O(){e[14].call(r,e[23],e[24],e[28])}return{c(){t=s("label"),r=s("input"),n=o(),m=s("span"),v=o(),b=a(E),this.h()},l(e){t=l(e,"LABEL",{class:!0});var o=c(t);r=l(o,"INPUT",{type:!0}),n=i(o),m=l(o,"SPAN",{}),c(m).forEach(h),v=i(o),b=u(o,E),o.forEach(h),this.h()},h(){f(r,"type","checkbox"),f(t,"class","checkbox relative")},m(o,s){p(o,t,s),d(t,r),r.checked=e[2][e[23]].props[e[24]].value[e[28]],d(t,n),d(t,m),d(t,v),d(t,b),y||(w=[g(r,"change",_),g(r,"change",O)],y=!0)},p(t,n){e=t,12&n[0]&&(r.checked=e[2][e[23]].props[e[24]].value[e[28]])},d(e){e&&h(t),y=!1,x(w)}}}function U(e){let t,r,n,m,g,b,x,y,w,E=e[25].name+"",_=e[25].unit+"";function O(e,t){return e[25].unit==F?C:N}let j=O(e),k=j(e);return{c(){t=s("fieldset"),r=s("div"),n=a(E),m=o(),g=s("span"),b=a("("),x=a(_),y=a(")"),w=o(),k.c(),this.h()},l(e){t=l(e,"FIELDSET",{class:!0});var o=c(t);r=l(o,"DIV",{class:!0});var s=c(r);n=u(s,E),m=i(s),g=l(s,"SPAN",{class:!0});var a=c(g);b=u(a,"("),x=u(a,_),y=u(a,")"),a.forEach(h),s.forEach(h),w=i(o),k.l(o),o.forEach(h),this.h()},h(){f(g,"class","fade"),f(r,"class","w160px"),f(t,"class","flex mb1 minw280px ")},m(e,o){p(e,t,o),d(t,r),d(r,n),d(r,m),d(r,g),d(g,b),d(g,x),d(g,y),d(t,w),k.m(t,null)},p(e,r){4&r[0]&&E!==(E=e[25].name+"")&&v(n,E),4&r[0]&&_!==(_=e[25].unit+"")&&v(x,_),j===(j=O(e))&&k?k.p(e,r):(k.d(1),k=j(e),k&&(k.c(),k.m(t,null)))},d(e){e&&h(t),k.d()}}}function H(e){let t,r,n,m,b,x,w,E,_,O,j,k,I=e[23]+1+"",A=e[21].name+"";function D(...t){return e[12](e[23],...t)}let T=Object.entries(e[21].props),V=[];for(let o=0;o<T.length;o+=1)V[o]=U(S(e,T,o));return{c(){t=s("div"),r=s("div"),n=s("div"),m=a("#"),b=a(I),x=o(),w=a(A),E=o(),_=s("button"),O=o();for(let e=0;e<V.length;e+=1)V[e].c();this.h()},l(e){t=l(e,"DIV",{class:!0});var o=c(t);r=l(o,"DIV",{class:!0});var s=c(r);n=l(s,"DIV",{});var a=c(n);m=u(a,"#"),b=u(a,I),x=i(a),w=u(a,A),a.forEach(h),E=i(s),_=l(s,"BUTTON",{class:!0}),c(_).forEach(h),s.forEach(h),O=i(o);for(let t=0;t<V.length;t+=1)V[t].l(o);o.forEach(h),this.h()},h(){f(_,"class","cross w1em"),f(r,"class","mtb1 flex row-space-between-flex-start"),f(t,"class","bb1-solid")},m(e,o){p(e,t,o),d(t,r),d(r,n),d(n,m),d(n,b),d(n,x),d(n,w),d(r,E),d(r,_),d(t,O);for(let r=0;r<V.length;r+=1)V[r].m(t,null);j||(k=g(_,"click",D),j=!0)},p(r,n){if(e=r,4&n[0]&&A!==(A=e[21].name+"")&&v(w,A),12&n[0]){let r;for(T=Object.entries(e[21].props),r=0;r<T.length;r+=1){const o=S(e,T,r);V[r]?V[r].p(o,n):(V[r]=U(o),V[r].c(),V[r].m(t,null))}for(;r<V.length;r+=1)V[r].d(1);V.length=T.length}},d(e){e&&h(t),y(V,e),j=!1,k()}}}function R(e){let t,r,n,m,v,b,E,_,O,j,k,S,A,T,N,C,P,U,R,$,F,J,B,G,z,M,X,q,W,K=(e[0]?e[4](e[1],e[2]):"")+"",Z=Object.entries(e[1]),Q=[];for(let o=0;o<Z.length;o+=1)Q[o]=V(D(e,Z,o));let Y=e[2],ee=[];for(let o=0;o<Y.length;o+=1)ee[o]=H(I(e,Y,o));return{c(){t=s("main"),r=s("div"),n=s("aside"),m=s("div");for(let e=0;e<Q.length;e+=1)Q[e].c();v=o(),b=s("div"),E=s("button"),_=a("SVG"),O=o(),j=s("button"),k=a("DXF"),S=o(),A=s("button"),T=a("JSCAD"),N=o(),C=s("a"),P=a("autr.tv"),U=o(),R=s("section"),$=s("div"),J=o(),B=s("aside");for(let e=0;e<ee.length;e+=1)ee[e].c();G=o(),z=s("div"),M=s("button"),X=a("add hole(s)"),this.h()},l(e){t=l(e,"MAIN",{});var o=c(t);r=l(o,"DIV",{class:!0});var s=c(r);n=l(s,"ASIDE",{class:!0});var a=c(n);m=l(a,"DIV",{});var f=c(m);for(let t=0;t<Q.length;t+=1)Q[t].l(f);f.forEach(h),v=i(a),b=l(a,"DIV",{class:!0});var p=c(b);E=l(p,"BUTTON",{class:!0});var d=c(E);_=u(d,"SVG"),d.forEach(h),O=i(p),j=l(p,"BUTTON",{class:!0});var g=c(j);k=u(g,"DXF"),g.forEach(h),S=i(p),A=l(p,"BUTTON",{class:!0});var x=c(A);T=u(x,"JSCAD"),x.forEach(h),N=i(p),C=l(p,"A",{href:!0,target:!0});var y=c(C);P=u(y,"autr.tv"),y.forEach(h),p.forEach(h),a.forEach(h),U=i(s),R=l(s,"SECTION",{class:!0});var w=c(R);$=l(w,"DIV",{style:!0}),c($).forEach(h),w.forEach(h),J=i(s),B=l(s,"ASIDE",{class:!0});var I=c(B);for(let t=0;t<ee.length;t+=1)ee[t].l(I);G=i(I),z=l(I,"DIV",{class:!0});var D=c(z);M=l(D,"BUTTON",{class:!0});var V=c(M);X=u(V,"add hole(s)"),V.forEach(h),D.forEach(h),I.forEach(h),s.forEach(h),o.forEach(h),this.h()},h(){f(E,"class","filled w100pc"),f(j,"class","filled w100pc"),f(A,"class","filled w100pc"),f(C,"href","https://autr.tv"),f(C,"target","_blank"),f(b,"class","cmb1"),f(n,"class",L+" maxw230px bg-b"),f($,"style",F=`transform: scale( ${e[1].screen.value} ); transform-origin: 0 0`),f(R,"class","overflow-auto p1 grow flex column-center-center rel"),f(M,"class","grow filled w100pc"),f(z,"class","cmt1"),f(B,"class",L+" maxw320px bg-a"),f(r,"class","flex row-stretch-stretch h100vh overflow-hidden")},m(o,s){p(o,t,s),d(t,r),d(r,n),d(n,m);for(let e=0;e<Q.length;e+=1)Q[e].m(m,null);d(n,v),d(n,b),d(b,E),d(E,_),d(b,O),d(b,j),d(j,k),d(b,S),d(b,A),d(A,T),d(b,N),d(b,C),d(C,P),d(r,U),d(r,R),d(R,$),$.innerHTML=K,d(r,J),d(r,B);for(let e=0;e<ee.length;e+=1)ee[e].m(B,null);d(B,G),d(B,z),d(z,M),d(M,X),q||(W=[g(E,"click",e[9]),g(j,"click",e[10]),g(A,"click",e[11]),g(M,"click",e[16])],q=!0)},p(e,t){if(2&t[0]){let r;for(Z=Object.entries(e[1]),r=0;r<Z.length;r+=1){const n=D(e,Z,r);Q[r]?Q[r].p(n,t):(Q[r]=V(n),Q[r].c(),Q[r].m(m,null))}for(;r<Q.length;r+=1)Q[r].d(1);Q.length=Z.length}if(7&t[0]&&K!==(K=(e[0]?e[4](e[1],e[2]):"")+"")&&($.innerHTML=K),2&t[0]&&F!==(F=`transform: scale( ${e[1].screen.value} ); transform-origin: 0 0`)&&f($,"style",F),140&t[0]){let r;for(Y=e[2],r=0;r<Y.length;r+=1){const n=I(e,Y,r);ee[r]?ee[r].p(n,t):(ee[r]=H(n),ee[r].c(),ee[r].m(B,G))}for(;r<ee.length;r+=1)ee[r].d(1);ee.length=Y.length}},i:w,o:w,d(e){e&&h(t),y(Q,e),y(ee,e),q=!1,x(W)}}}const $="mm",F="target",J="hole(s)";let L="h100vh overflow-auto flex column-stretch-space-between p1";function B(e,t,r,n,o,s,a){return{value:e,name:t,min:n,max:o,step:s,unit:r,title:a}}function G(e,t){13===e.keyCode&&e.target.blur()}function z(t,r,n){let o,s,a=!1;E((async()=>{n(0,o=await _((()=>import("./index-74791d5a.js").then((function(e){return e.i}))),void 0)),s={rectangle:o.models.Rectangle,svg:o.exporter.toSVG,subtract:o.model.combineSubtraction,union:o.model.combineUnion,move:o.model.move,combine:o.model.combine};try{const e="("+window.location.hash.substring(1)+")",t=k.decode(e);for(const[r,o]of Object.entries(t.conf))r in l&&null!=o&&n(1,l[r].value=o,l);n(2,h=[]),t.els.forEach(((e,t)=>{const r=f(e.name);for(const[n,o]of Object.entries(e.props))n in r.props&&null!=o&&(r.props[n].value=o)}))}catch(e){console.warn("error decoding URI, skipping:",e.message),f(J),f(J),n(2,h[1].props.diameter.value=50,h),n(2,h[1].props.offset.value=0,h),n(2,h[1].props.count.value=1,h)}}));const i={top:"top",left:"left",front:"front",back:"back",right:"right",bottom:"bottom"};let l={screen:B(1,"zoom","num",1,null,null),width:B(145,"width",$,20,null,null,"box"),height:B(145,"height",$,20),depth:B(145,"depth",$,20),thickness:B(5,"thickness",$,0,20),tabs:B(9,"tabs","num",0,null,null,"sides"),offset:B(1,"offset","num",0,2,.05),overhang:B(5,"overhang",$,2,null,null,"panel"),size:B(10,"size",$,0)};const c={[J]:{name:J,props:{diameter:B(3,"hole diameter",$),offset:B(60,"hole offset",$,0),count:B(4,"hole amount","num",1),rotate:B(0,"rotation","deg")}}};let u,h=[];function f(e){const t=h;n(2,h=[]);let r={};Object.keys(i).map((e=>r[e]=!1)),r.top=!0;let o=JSON.parse(JSON.stringify(c[e]));return o.props.target=B(r,"target",F),t.push(o),n(2,h=t),t[t.length-1]}function p(e,t){const r=o.exporter[e](u,{units:"mm"});let n=document.createElement("a");n.setAttribute("href","data:text/plaincharset=utf-8,"+encodeURIComponent(r)),n.setAttribute("download",`boxinator.${t}`),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function d(e){let t=h;n(2,h=[]),t.splice(e,1),n(2,h=t)}return[o,l,h,i,function(t,r){function n(e,t,r){const n=function(e){const t=o.model.findSingleChain(e);return o.exporter.chainToSVGPathData(t)}(e);return{models:{rect:s.move(o.importer.fromSVGPathData(n),[t,r])}}}let i={};if(!o)return;const l=t.thickness.value||1,c=t.depth.value||1,h=t.tabs.value||1,f=t.size.value||1,p=parseFloat(t.offset.value)||0,d=t.overhang.value||1;let m=t.width.value||1,g=t.height.value||1;m+=l,g+=l;let v=0;const b=g,x=g+2*d+3*l;let y={};["top","bottom"].forEach(((e,t)=>{let r=g+l;const n=t%2==0,a=2*d,i=m+a+l,u=g+a+l;let h={models:{rect:new s.rectangle(i,u)},origin:[r-d+l,n?0:x+c+2*l]};const p=f+l;let v={models:{a:s.move(new s.rectangle(p,l),[d,d]),b:s.move(new s.rectangle(l,p),[d,d])}};s.combine(v.models.a,v.models.b),[{name:"bl",rot:0,xy:[0,0]},{name:"br",rot:90,xy:[i,0]},{name:"tr",rot:180,xy:[i,u]},{name:"tl",rot:270,xy:[0,u]}].forEach((e=>{const t=JSON.parse(JSON.stringify(v));s.move(t,e.xy),o.model.rotate(t,e.rot,e.xy),h.models[e.name]=t})),y[e]=h})),["left","front","right","back"].forEach(((e,t)=>{let r=t%2==0?g:m;r+=l;let o={models:{rect:new s.rectangle(r,c)},origin:[v,b]};const a=c/(h/2);for(let n=0;n<h/2+1;n++){o.origin[0];const e=a*n,t=a/2;[{x:-1,y:e-t*p,w:l+1,h:t},{x:r-l,y:e-t*p+t,w:l+1,h:t}].forEach(((e,t)=>{parseInt(e.y+e.h)==parseInt(c)&&(e.h+=10);const r=s.move(new s.rectangle(e.w,e.h),[e.x,e.y]),a="bit"+n+"-"+t;o.models[a]=r,s.subtract(o.models.rect,o.models[a])}))}let u=[{x:v,y:-l,w:f,h:l+1},{x:v+r-2*l+l,y:-l,w:f-l,h:l+1},{x:v,y:c-1,w:f,h:l+1},{x:v+r-2*l+l,y:c-1,w:f-l,h:l+1}];o=n(o,0,-g),u.forEach(((e,n)=>{const a=e.x+e.w==r+v,i=e.x==v;a||i?(e.w+=l,n%2!=0&&(e.x-=f)):(e.x-=f,e.w+=f+(l-f));const c=s.move(new s.rectangle(e.w,e.h),[e.x,e.y]),u="slot"+t+"-"+n;o.models[u]=c,s.combine(o.models.rect,o.models[u],!1,!0,!1,!0)})),o=n(o,0,0),o.origin=[0,x],i[e]=o,v+=r+l}));let w={};if(r.forEach(((t,r)=>{const n=t.props.target.value;Object.keys(n).forEach((a=>{const l=n[a],c=e(e({},i),y)[a],u=t.props.diameter.value||1,h=t.props.offset.value||0,f=t.props.rotate.value||0,p=t.props.count.value||1;if(!l||!c)return;const d=o.measure.modelExtents(c),m=d.center;let g=360/p;console.log("bounding box ~",a,d.width,d.height);for(let e=0;e<p;e++){const t={type:"circle",origin:m,radius:u},n="circle-"+a+"-"+r+"-"+e;s.move(t,[h+m[0],m[1]]);let i=f+e*g;o.path.rotate(t,i,m),w[n]=t}}))})),u={models:{sides:{models:i},faces:{models:y}},paths:w},o.model.mirror(u,!0,!0),a)try{let e={conf:{},els:[]};Object.keys(t).forEach((r=>e.conf[r]=t[r].value)),r.forEach((t=>{let r={props:{},name:t.name};Object.keys(t.props).forEach((e=>r.props[e]=t.props[e].value)),e.els.push(r)})),window.location.hash=k.encode_object(e)}catch(E){console.warn("error encoding URI, skipping:",E.message)}return a=!0,s.svg(u)},f,p,d,function(e){l[e].value=b(this.value),n(1,l)},e=>p("toSVG","svg"),e=>p("toDXF","dxf"),e=>p("toOpenJsCad","ojscad"),(e,t)=>d(e),(e,t,r,n)=>{h[e].props[t].value[r]},function(e,t,r){h[e].props[t].value[r]=this.checked,n(2,h),n(3,i)},function(e,t){h[e].props[t].value=b(this.value),n(2,h)},e=>f(J)]}class M extends t{constructor(e){super(),r(this,e,z,R,n,{},[-1,-1])}}export{M as R,j as c,O as g};
